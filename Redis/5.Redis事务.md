# 事务

> Redis单条命令式保证原子性，但是==事务不保证原子性==



## Redis事务本质：一组命令的集合

一个事务中的所有命令都会被序列化，在事务执行过程中，会按照顺序执行（队列）

***一次性、顺序性、排他性***

```
------ 队列 set set set set 执行 ------
```

==Redis事务没有隔离级别的概念==

所有的命令在事务中，并没有直接被执行。只有发起执行命令的时候才会执行（Exec）



## Redis的事务步骤



### 正常执行事务

- 开启事务（multi）
- 命令入队（……）
- 执行事务（exec）

### 放弃事务

```
DISCARD
```

### 编译型异常（代码有问题，命令有错），事务中所有的命令都不会被执行



### 运行时异常（1/0），如果事务队列中存在语法性，那么执行命令的时候，其他命令是可以正常执行的，错误命令抛出异常

